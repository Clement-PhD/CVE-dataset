{
    "url": "https://api.github.com/repos/theforeman/smart-proxy/pulls/217",
    "id": 22344814,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjIzNDQ4MTQ=",
    "html_url": "https://github.com/theforeman/smart-proxy/pull/217",
    "diff_url": "https://github.com/theforeman/smart-proxy/pull/217.diff",
    "patch_url": "https://github.com/theforeman/smart-proxy/pull/217.patch",
    "issue_url": "https://api.github.com/repos/theforeman/smart-proxy/issues/217",
    "number": 217,
    "state": "closed",
    "locked": false,
    "title": "fixes #7822 - forbid HTTPS requests with no client SSL certificate",
    "user": {
        "login": "domcleal",
        "id": 482089,
        "node_id": "MDQ6VXNlcjQ4MjA4OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/482089?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/domcleal",
        "html_url": "https://github.com/domcleal",
        "followers_url": "https://api.github.com/users/domcleal/followers",
        "following_url": "https://api.github.com/users/domcleal/following{/other_user}",
        "gists_url": "https://api.github.com/users/domcleal/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/domcleal/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/domcleal/subscriptions",
        "organizations_url": "https://api.github.com/users/domcleal/orgs",
        "repos_url": "https://api.github.com/users/domcleal/repos",
        "events_url": "https://api.github.com/users/domcleal/events{/privacy}",
        "received_events_url": "https://api.github.com/users/domcleal/received_events",
        "type": "User",
        "site_admin": false
    },
    "body": "Please review as a priority, and test heavily.  It seems that OpenSSL correctly refuses connections when the certificate presented isn't trusted by the CA that the server is using (note, we don't have separate client/server CAs), and the problem is only when no client cert is presented.\n\nI can't see a way to check that relying on OpenSSL for bad verification is always solid.  The closest I've found is that the socket that WEBrick sees has an OpenSSL verification result attached (http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/SSL/SSLSocket.html) but I can't see a way to get at that.  In any case, it only seems to reach the smart proxy when there's either no cert or it validates and in both cases the verify_result was \"OK\".\n\nLastly, I'm looking at more tests in the 7822-ssl-verify branch which test Proxy::Launcher's https_app by spinning up the rack/WEBrick app and then make requests, but this will take more refactoring.  I will probably follow up with this in another ticket, and only to develop (not 1.6 etc).\n\nNo CVE assigned yet - will add it to commit message before it's merged.\n",
    "created_at": "2014-10-07T11:01:15Z",
    "updated_at": "2014-10-08T12:27:58Z",
    "closed_at": "2014-10-08T12:27:58Z",
    "merged_at": null,
    "merge_commit_sha": "c58fd100b21688e18335bf2ef48727d7a623c31b",
    "assignee": null,
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "labels": [],
    "milestone": null,
    "draft": false,
    "commits_url": "https://api.github.com/repos/theforeman/smart-proxy/pulls/217/commits",
    "review_comments_url": "https://api.github.com/repos/theforeman/smart-proxy/pulls/217/comments",
    "review_comment_url": "https://api.github.com/repos/theforeman/smart-proxy/pulls/comments{/number}",
    "comments_url": "https://api.github.com/repos/theforeman/smart-proxy/issues/217/comments",
    "statuses_url": "https://api.github.com/repos/theforeman/smart-proxy/statuses/a49993bd0722d3a970fee2329b53c22e5e9c2e46",
    "head": {
        "label": "domcleal:7822-ssl-verify-only",
        "ref": "7822-ssl-verify-only",
        "sha": "a49993bd0722d3a970fee2329b53c22e5e9c2e46",
        "user": {
            "login": "domcleal",
            "id": 482089,
            "node_id": "MDQ6VXNlcjQ4MjA4OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/482089?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/domcleal",
            "html_url": "https://github.com/domcleal",
            "followers_url": "https://api.github.com/users/domcleal/followers",
            "following_url": "https://api.github.com/users/domcleal/following{/other_user}",
            "gists_url": "https://api.github.com/users/domcleal/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/domcleal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/domcleal/subscriptions",
            "organizations_url": "https://api.github.com/users/domcleal/orgs",
            "repos_url": "https://api.github.com/users/domcleal/repos",
            "events_url": "https://api.github.com/users/domcleal/events{/privacy}",
            "received_events_url": "https://api.github.com/users/domcleal/received_events",
            "type": "User",
            "site_admin": false
        },
        "repo": {
            "id": 6581975,
            "node_id": "MDEwOlJlcG9zaXRvcnk2NTgxOTc1",
            "name": "smart-proxy",
            "full_name": "domcleal/smart-proxy",
            "private": false,
            "owner": {
                "login": "domcleal",
                "id": 482089,
                "node_id": "MDQ6VXNlcjQ4MjA4OQ==",
                "avatar_url": "https://avatars.githubusercontent.com/u/482089?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/domcleal",
                "html_url": "https://github.com/domcleal",
                "followers_url": "https://api.github.com/users/domcleal/followers",
                "following_url": "https://api.github.com/users/domcleal/following{/other_user}",
                "gists_url": "https://api.github.com/users/domcleal/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/domcleal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/domcleal/subscriptions",
                "organizations_url": "https://api.github.com/users/domcleal/orgs",
                "repos_url": "https://api.github.com/users/domcleal/repos",
                "events_url": "https://api.github.com/users/domcleal/events{/privacy}",
                "received_events_url": "https://api.github.com/users/domcleal/received_events",
                "type": "User",
                "site_admin": false
            },
            "html_url": "https://github.com/domcleal/smart-proxy",
            "description": "RESTful proxies for DNS, DHCP, TFTP and Puppet",
            "fork": true,
            "url": "https://api.github.com/repos/domcleal/smart-proxy",
            "forks_url": "https://api.github.com/repos/domcleal/smart-proxy/forks",
            "keys_url": "https://api.github.com/repos/domcleal/smart-proxy/keys{/key_id}",
            "collaborators_url": "https://api.github.com/repos/domcleal/smart-proxy/collaborators{/collaborator}",
            "teams_url": "https://api.github.com/repos/domcleal/smart-proxy/teams",
            "hooks_url": "https://api.github.com/repos/domcleal/smart-proxy/hooks",
            "issue_events_url": "https://api.github.com/repos/domcleal/smart-proxy/issues/events{/number}",
            "events_url": "https://api.github.com/repos/domcleal/smart-proxy/events",
            "assignees_url": "https://api.github.com/repos/domcleal/smart-proxy/assignees{/user}",
            "branches_url": "https://api.github.com/repos/domcleal/smart-proxy/branches{/branch}",
            "tags_url": "https://api.github.com/repos/domcleal/smart-proxy/tags",
            "blobs_url": "https://api.github.com/repos/domcleal/smart-proxy/git/blobs{/sha}",
            "git_tags_url": "https://api.github.com/repos/domcleal/smart-proxy/git/tags{/sha}",
            "git_refs_url": "https://api.github.com/repos/domcleal/smart-proxy/git/refs{/sha}",
            "trees_url": "https://api.github.com/repos/domcleal/smart-proxy/git/trees{/sha}",
            "statuses_url": "https://api.github.com/repos/domcleal/smart-proxy/statuses/{sha}",
            "languages_url": "https://api.github.com/repos/domcleal/smart-proxy/languages",
            "stargazers_url": "https://api.github.com/repos/domcleal/smart-proxy/stargazers",
            "contributors_url": "https://api.github.com/repos/domcleal/smart-proxy/contributors",
            "subscribers_url": "https://api.github.com/repos/domcleal/smart-proxy/subscribers",
            "subscription_url": "https://api.github.com/repos/domcleal/smart-proxy/subscription",
            "commits_url": "https://api.github.com/repos/domcleal/smart-proxy/commits{/sha}",
            "git_commits_url": "https://api.github.com/repos/domcleal/smart-proxy/git/commits{/sha}",
            "comments_url": "https://api.github.com/repos/domcleal/smart-proxy/comments{/number}",
            "issue_comment_url": "https://api.github.com/repos/domcleal/smart-proxy/issues/comments{/number}",
            "contents_url": "https://api.github.com/repos/domcleal/smart-proxy/contents/{+path}",
            "compare_url": "https://api.github.com/repos/domcleal/smart-proxy/compare/{base}...{head}",
            "merges_url": "https://api.github.com/repos/domcleal/smart-proxy/merges",
            "archive_url": "https://api.github.com/repos/domcleal/smart-proxy/{archive_format}{/ref}",
            "downloads_url": "https://api.github.com/repos/domcleal/smart-proxy/downloads",
            "issues_url": "https://api.github.com/repos/domcleal/smart-proxy/issues{/number}",
            "pulls_url": "https://api.github.com/repos/domcleal/smart-proxy/pulls{/number}",
            "milestones_url": "https://api.github.com/repos/domcleal/smart-proxy/milestones{/number}",
            "notifications_url": "https://api.github.com/repos/domcleal/smart-proxy/notifications{?since,all,participating}",
            "labels_url": "https://api.github.com/repos/domcleal/smart-proxy/labels{/name}",
            "releases_url": "https://api.github.com/repos/domcleal/smart-proxy/releases{/id}",
            "deployments_url": "https://api.github.com/repos/domcleal/smart-proxy/deployments",
            "created_at": "2012-11-07T16:06:22Z",
            "updated_at": "2014-06-23T11:38:31Z",
            "pushed_at": "2017-05-19T10:44:08Z",
            "git_url": "git://github.com/domcleal/smart-proxy.git",
            "ssh_url": "git@github.com:domcleal/smart-proxy.git",
            "clone_url": "https://github.com/domcleal/smart-proxy.git",
            "svn_url": "https://github.com/domcleal/smart-proxy",
            "homepage": "http://theforeman.org/projects/smart-proxy",
            "size": 1580,
            "stargazers_count": 0,
            "watchers_count": 0,
            "language": "Ruby",
            "has_issues": false,
            "has_projects": true,
            "has_downloads": true,
            "has_wiki": false,
            "has_pages": false,
            "has_discussions": false,
            "forks_count": 0,
            "mirror_url": null,
            "archived": false,
            "disabled": false,
            "open_issues_count": 0,
            "license": {
                "key": "gpl-3.0",
                "name": "GNU General Public License v3.0",
                "spdx_id": "GPL-3.0",
                "url": "https://api.github.com/licenses/gpl-3.0",
                "node_id": "MDc6TGljZW5zZTk="
            },
            "allow_forking": true,
            "is_template": false,
            "web_commit_signoff_required": false,
            "topics": [],
            "visibility": "public",
            "forks": 0,
            "open_issues": 0,
            "watchers": 0,
            "default_branch": "develop"
        }
    },
    "base": {
        "label": "theforeman:develop",
        "ref": "develop",
        "sha": "56e62d1295ab65e7deca27890ee69e1312ceca0a",
        "user": {
            "login": "theforeman",
            "id": 1439844,
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0Mzk4NDQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1439844?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/theforeman",
            "html_url": "https://github.com/theforeman",
            "followers_url": "https://api.github.com/users/theforeman/followers",
            "following_url": "https://api.github.com/users/theforeman/following{/other_user}",
            "gists_url": "https://api.github.com/users/theforeman/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/theforeman/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/theforeman/subscriptions",
            "organizations_url": "https://api.github.com/users/theforeman/orgs",
            "repos_url": "https://api.github.com/users/theforeman/repos",
            "events_url": "https://api.github.com/users/theforeman/events{/privacy}",
            "received_events_url": "https://api.github.com/users/theforeman/received_events",
            "type": "Organization",
            "site_admin": false
        },
        "repo": {
            "id": 986551,
            "node_id": "MDEwOlJlcG9zaXRvcnk5ODY1NTE=",
            "name": "smart-proxy",
            "full_name": "theforeman/smart-proxy",
            "private": false,
            "owner": {
                "login": "theforeman",
                "id": 1439844,
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0Mzk4NDQ=",
                "avatar_url": "https://avatars.githubusercontent.com/u/1439844?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/theforeman",
                "html_url": "https://github.com/theforeman",
                "followers_url": "https://api.github.com/users/theforeman/followers",
                "following_url": "https://api.github.com/users/theforeman/following{/other_user}",
                "gists_url": "https://api.github.com/users/theforeman/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/theforeman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/theforeman/subscriptions",
                "organizations_url": "https://api.github.com/users/theforeman/orgs",
                "repos_url": "https://api.github.com/users/theforeman/repos",
                "events_url": "https://api.github.com/users/theforeman/events{/privacy}",
                "received_events_url": "https://api.github.com/users/theforeman/received_events",
                "type": "Organization",
                "site_admin": false
            },
            "html_url": "https://github.com/theforeman/smart-proxy",
            "description": "RESTful proxies for DNS, DHCP, TFTP, BMC and Puppet",
            "fork": false,
            "url": "https://api.github.com/repos/theforeman/smart-proxy",
            "forks_url": "https://api.github.com/repos/theforeman/smart-proxy/forks",
            "keys_url": "https://api.github.com/repos/theforeman/smart-proxy/keys{/key_id}",
            "collaborators_url": "https://api.github.com/repos/theforeman/smart-proxy/collaborators{/collaborator}",
            "teams_url": "https://api.github.com/repos/theforeman/smart-proxy/teams",
            "hooks_url": "https://api.github.com/repos/theforeman/smart-proxy/hooks",
            "issue_events_url": "https://api.github.com/repos/theforeman/smart-proxy/issues/events{/number}",
            "events_url": "https://api.github.com/repos/theforeman/smart-proxy/events",
            "assignees_url": "https://api.github.com/repos/theforeman/smart-proxy/assignees{/user}",
            "branches_url": "https://api.github.com/repos/theforeman/smart-proxy/branches{/branch}",
            "tags_url": "https://api.github.com/repos/theforeman/smart-proxy/tags",
            "blobs_url": "https://api.github.com/repos/theforeman/smart-proxy/git/blobs{/sha}",
            "git_tags_url": "https://api.github.com/repos/theforeman/smart-proxy/git/tags{/sha}",
            "git_refs_url": "https://api.github.com/repos/theforeman/smart-proxy/git/refs{/sha}",
            "trees_url": "https://api.github.com/repos/theforeman/smart-proxy/git/trees{/sha}",
            "statuses_url": "https://api.github.com/repos/theforeman/smart-proxy/statuses/{sha}",
            "languages_url": "https://api.github.com/repos/theforeman/smart-proxy/languages",
            "stargazers_url": "https://api.github.com/repos/theforeman/smart-proxy/stargazers",
            "contributors_url": "https://api.github.com/repos/theforeman/smart-proxy/contributors",
            "subscribers_url": "https://api.github.com/repos/theforeman/smart-proxy/subscribers",
            "subscription_url": "https://api.github.com/repos/theforeman/smart-proxy/subscription",
            "commits_url": "https://api.github.com/repos/theforeman/smart-proxy/commits{/sha}",
            "git_commits_url": "https://api.github.com/repos/theforeman/smart-proxy/git/commits{/sha}",
            "comments_url": "https://api.github.com/repos/theforeman/smart-proxy/comments{/number}",
            "issue_comment_url": "https://api.github.com/repos/theforeman/smart-proxy/issues/comments{/number}",
            "contents_url": "https://api.github.com/repos/theforeman/smart-proxy/contents/{+path}",
            "compare_url": "https://api.github.com/repos/theforeman/smart-proxy/compare/{base}...{head}",
            "merges_url": "https://api.github.com/repos/theforeman/smart-proxy/merges",
            "archive_url": "https://api.github.com/repos/theforeman/smart-proxy/{archive_format}{/ref}",
            "downloads_url": "https://api.github.com/repos/theforeman/smart-proxy/downloads",
            "issues_url": "https://api.github.com/repos/theforeman/smart-proxy/issues{/number}",
            "pulls_url": "https://api.github.com/repos/theforeman/smart-proxy/pulls{/number}",
            "milestones_url": "https://api.github.com/repos/theforeman/smart-proxy/milestones{/number}",
            "notifications_url": "https://api.github.com/repos/theforeman/smart-proxy/notifications{?since,all,participating}",
            "labels_url": "https://api.github.com/repos/theforeman/smart-proxy/labels{/name}",
            "releases_url": "https://api.github.com/repos/theforeman/smart-proxy/releases{/id}",
            "deployments_url": "https://api.github.com/repos/theforeman/smart-proxy/deployments",
            "created_at": "2010-10-14T10:00:51Z",
            "updated_at": "2023-09-11T03:24:31Z",
            "pushed_at": "2023-12-19T15:56:26Z",
            "git_url": "git://github.com/theforeman/smart-proxy.git",
            "ssh_url": "git@github.com:theforeman/smart-proxy.git",
            "clone_url": "https://github.com/theforeman/smart-proxy.git",
            "svn_url": "https://github.com/theforeman/smart-proxy",
            "homepage": "http://theforeman.org/projects/smart-proxy",
            "size": 2824,
            "stargazers_count": 209,
            "watchers_count": 209,
            "language": "Ruby",
            "has_issues": false,
            "has_projects": false,
            "has_downloads": true,
            "has_wiki": false,
            "has_pages": false,
            "has_discussions": false,
            "forks_count": 217,
            "mirror_url": null,
            "archived": false,
            "disabled": false,
            "open_issues_count": 14,
            "license": {
                "key": "other",
                "name": "Other",
                "spdx_id": "NOASSERTION",
                "url": null,
                "node_id": "MDc6TGljZW5zZTA="
            },
            "allow_forking": true,
            "is_template": false,
            "web_commit_signoff_required": false,
            "topics": [
                "hacktoberfest"
            ],
            "visibility": "public",
            "forks": 217,
            "open_issues": 14,
            "watchers": 209,
            "default_branch": "develop"
        }
    },
    "_links": {
        "self": {
            "href": "https://api.github.com/repos/theforeman/smart-proxy/pulls/217"
        },
        "html": {
            "href": "https://github.com/theforeman/smart-proxy/pull/217"
        },
        "issue": {
            "href": "https://api.github.com/repos/theforeman/smart-proxy/issues/217"
        },
        "comments": {
            "href": "https://api.github.com/repos/theforeman/smart-proxy/issues/217/comments"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/theforeman/smart-proxy/pulls/217/comments"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/theforeman/smart-proxy/pulls/comments{/number}"
        },
        "commits": {
            "href": "https://api.github.com/repos/theforeman/smart-proxy/pulls/217/commits"
        },
        "statuses": {
            "href": "https://api.github.com/repos/theforeman/smart-proxy/statuses/a49993bd0722d3a970fee2329b53c22e5e9c2e46"
        }
    },
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "active_lock_reason": null,
    "merged": false,
    "mergeable": false,
    "rebaseable": false,
    "mergeable_state": "dirty",
    "merged_by": null,
    "comments": 9,
    "review_comments": 12,
    "maintainer_can_modify": false,
    "commits": 1,
    "additions": 53,
    "deletions": 0,
    "changed_files": 4
}