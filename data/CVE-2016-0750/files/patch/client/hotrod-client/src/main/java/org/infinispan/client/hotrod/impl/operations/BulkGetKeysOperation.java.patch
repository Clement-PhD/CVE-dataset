@@ -5,7 +5,7 @@
 import java.util.Set;
 import java.util.concurrent.atomic.AtomicInteger;
 
-import org.infinispan.client.hotrod.configuration.ClientIntelligence;
+import org.infinispan.client.hotrod.configuration.Configuration;
 import org.infinispan.client.hotrod.impl.protocol.Codec;
 import org.infinispan.client.hotrod.impl.protocol.HeaderParams;
 import org.infinispan.client.hotrod.impl.transport.Transport;
@@ -21,8 +21,8 @@ public class BulkGetKeysOperation<K> extends RetryOnFailureOperation<Set<K>> {
    private final int scope;
 
    public BulkGetKeysOperation(Codec codec, TransportFactory transportFactory, byte[] cacheName,
-                               AtomicInteger topologyId, int flags, ClientIntelligence clientIntelligence, int scope) {
-      super(codec, transportFactory, cacheName, topologyId, flags, clientIntelligence);
+                               AtomicInteger topologyId, int flags, Configuration cfg, int scope) {
+      super(codec, transportFactory, cacheName, topologyId, flags, cfg);
       this.scope = scope;
    }
 
@@ -39,7 +39,7 @@ protected Set<K> executeOperation(Transport transport) {
       short status = readHeaderAndValidate(transport, params);
       Set<K> result = new HashSet<K>();
       while ( transport.readByte() == 1) { //there's more!
-         result.add(codec.readUnmarshallByteArray(transport, status));
+         result.add(codec.readUnmarshallByteArray(transport, status, cfg.serialWhitelist()));
       }
       return result;
    }