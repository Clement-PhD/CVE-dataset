@@ -66,7 +66,9 @@ public function form($id = null)
         if ($this->input->post('btn_cancel')) {
             redirect('clients');
         }
-
+        
+        $new_client = false;
+        
         // Set validation rule based on is_update
         if ($this->input->post('is_update') == 0 && $this->input->post('client_name') != '') {
             $check = $this->db->get_where('ip_clients', array(
@@ -77,12 +79,19 @@ public function form($id = null)
             if (!empty($check)) {
                 $this->session->set_flashdata('alert_error', trans('client_already_exists'));
                 redirect('clients/form');
+            } else {
+                $new_client = true;
             }
         }
-
+        
         if ($this->mdl_clients->run_validation()) {
             $id = $this->mdl_clients->save($id);
-
+            
+            if ($new_client) {
+                $this->load->model('user_clients/mdl_user_clients');
+                $this->mdl_user_clients->get_users_all_clients();
+            }
+            
             $this->load->model('custom_fields/mdl_client_custom');
             $result = $this->mdl_client_custom->save_custom($id, $this->input->post('custom'));
 