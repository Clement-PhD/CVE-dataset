@@ -1158,6 +1158,7 @@ void File_SmpteSt0337::Data_Parse()
 
     // Parsing
     int32u  length_code;
+    int8u data_type_New;
     Element_Begin1("Header");
         BS_Begin();
         Skip_S3(Stream_Bits,                                    "Pa");
@@ -1167,7 +1168,7 @@ void File_SmpteSt0337::Data_Parse()
             Skip_S1( 5,                                         "data_type_dependent");
             Skip_SB(                                            "error_flag");
             Info_S1( 2, data_mode,                              "data_mode"); Param_Info2(16+4*data_mode, " bits");
-            Get_S1 ( 5, data_type,                              "data_type"); Param_Info1(Smpte_St0337_data_type[data_type]);
+            Get_S1 ( 5, data_type_New,                          "data_type"); Param_Info1(Smpte_St0337_data_type[data_type]);
             if (Stream_Bits>16)
                 Skip_S1( 4,                                     "reserved");
             if (Stream_Bits>20)
@@ -1177,6 +1178,11 @@ void File_SmpteSt0337::Data_Parse()
         BS_End();
     Element_End0();
 
+    if (data_type_New!=data_type)
+    {
+        delete Parser; Parser=NULL;
+        data_type=data_type_New;
+    }
     if (Parser==NULL)
     {
         switch(data_type)