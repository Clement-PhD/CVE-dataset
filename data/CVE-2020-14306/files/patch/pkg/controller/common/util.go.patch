@@ -8,10 +8,12 @@ import (
 	core "k8s.io/api/core/v1"
 	"k8s.io/apimachinery/pkg/runtime"
 	"k8s.io/apimachinery/pkg/types"
+	"k8s.io/apimachinery/pkg/util/sets"
 	"k8s.io/client-go/tools/record"
 
 	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
 
+	maistrav1 "github.com/maistra/istio-operator/pkg/apis/maistra/v1"
 	"sigs.k8s.io/controller-runtime/pkg/client"
 )
 
@@ -141,3 +143,15 @@ func BoolToConditionStatus(b bool) core.ConditionStatus {
 		return core.ConditionFalse
 	}
 }
+
+// GetMeshNamespaces returns all namespaces that are part of a mesh.
+func GetMeshNamespaces(smcp *maistrav1.ServiceMeshControlPlane, smmr *maistrav1.ServiceMeshMemberRoll) sets.String {
+	if smcp == nil {
+		return sets.NewString()
+	}
+	meshNamespaces := sets.NewString(smcp.GetNamespace())
+	if smmr != nil {
+		meshNamespaces.Insert(smmr.Status.ConfiguredMembers...)
+	}
+	return meshNamespaces
+}
