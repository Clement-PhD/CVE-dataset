@@ -4,6 +4,7 @@
 
 use Common\WebTestCase;
 use Symfony\Bundle\FrameworkBundle\Client;
+use Symfony\Component\HttpFoundation\Session\Session;
 
 abstract class BackendWebTestCase extends WebTestCase
 {
@@ -39,4 +40,18 @@ protected function assertAuthenticationIsNeeded(Client $client, string $url, str
             $method
         );
     }
+
+    protected function appendCsrfTokenToUrl(Client $client, string $url): string
+    {
+        $connectionSymbol = (strpos($url, '?') !== false) ? '&' : '?';
+
+        $session = $client->getContainer()->get('session');
+
+        if (!$session instanceof Session) {
+            // no session so no csrf token
+            return $url;
+        }
+
+        return $url . $connectionSymbol . 'token=' . $session->get('csrf_token');
+    }
 }
