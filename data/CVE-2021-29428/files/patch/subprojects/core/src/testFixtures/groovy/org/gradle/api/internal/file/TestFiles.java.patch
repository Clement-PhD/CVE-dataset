@@ -64,7 +64,8 @@
 public class TestFiles {
     private static final FileSystem FILE_SYSTEM = NativeServicesTestFixture.getInstance().get(FileSystem.class);
     private static final DefaultFileLookup FILE_LOOKUP = new DefaultFileLookup();
-    private static final DefaultExecActionFactory EXEC_FACTORY = DefaultExecActionFactory.of(resolver(), fileCollectionFactory(), new DefaultExecutorFactory());
+    private static final DefaultExecActionFactory EXEC_FACTORY =
+        DefaultExecActionFactory.of(resolver(), fileCollectionFactory(), new DefaultExecutorFactory(), TmpDirTemporaryFileProvider.createLegacy());
 
     public static FileCollectionInternal empty() {
         return fileCollectionFactory().empty();
@@ -257,4 +258,8 @@ public static Factory<PatternSet> getPatternSetFactory() {
     public static String systemSpecificAbsolutePath(String path) {
         return new File(path).getAbsolutePath();
     }
+
+    public static TmpDirTemporaryFileProvider tmpDirTemporaryFileProvider(File baseDir) {
+        return TmpDirTemporaryFileProvider.createFromCustomBase(() -> baseDir);
+    }
 }
