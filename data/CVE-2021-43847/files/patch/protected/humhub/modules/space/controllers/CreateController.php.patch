@@ -8,16 +8,14 @@
 
 namespace humhub\modules\space\controllers;
 
+use Colors\RandomColor;
 use humhub\components\Controller;
 use humhub\components\behaviors\AccessControl;
-use humhub\models\Setting;
-use humhub\modules\content\components\ContentContainerModule;
-use humhub\modules\content\components\ContentContainerModuleManager;
+use humhub\modules\space\models\forms\InviteForm;
 use humhub\modules\space\models\Space;
 use humhub\modules\space\permissions\CreatePrivateSpace;
 use humhub\modules\space\permissions\CreatePublicSpace;
-use humhub\modules\space\models\forms\InviteForm;
-use Colors\RandomColor;
+use humhub\modules\space\permissions\InviteUsers;
 use humhub\modules\user\helpers\AuthHelper;
 use Yii;
 use yii\base\Exception;
@@ -159,6 +157,10 @@ public function actionInvite($space = null, $spaceId = null)
             throw new HttpException(404);
         }
 
+        if (!$space->can(InviteUsers::class)) {
+            throw new HttpException(400, 'You are not allowed to invite users to the space!');
+        }
+
         $model = new InviteForm(['space' => $space]);
 
         if ($model->load(Yii::$app->request->post()) && $model->save()) {