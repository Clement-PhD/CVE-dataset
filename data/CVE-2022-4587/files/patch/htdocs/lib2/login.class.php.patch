@@ -278,7 +278,7 @@ public function try_login_encrypted($user, $encryptedPassword, $permanent)
         sql_free_result($rsUser);
 
         if ($permanent == null) {
-            $permanent = ($rUser['permanent_login_flag'] == 1);
+            $permanent = ($rUser['permanent_login_flag'] ?? null == 1);
         }
 
         if ($rUser) {