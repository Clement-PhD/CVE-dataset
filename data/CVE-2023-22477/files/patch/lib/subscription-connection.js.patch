@@ -41,7 +41,11 @@ module.exports = class SubscriptionConnection {
 
     this.protocolMessageTypes = getProtocolByName(socket.protocol)
     this.socket.on('error', this.handleConnectionClose.bind(this))
-    this.handleConnection()
+
+    // We need a catch here because the socket might be closed before the connection is established
+    // and we don't want to crash the server. Note that the errors are already
+    // logged elsewhere @fastify/websocket so there is no need to log them again.
+    this.handleConnection().catch(noop)
   }
 
   async handleConnection () {
@@ -412,3 +416,5 @@ module.exports = class SubscriptionConnection {
     this.sendMessage(this.protocolMessageTypes.GQL_CONNECTION_KEEP_ALIVE)
   }
 }
+
+function noop () {}
