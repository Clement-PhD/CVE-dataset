@@ -24,7 +24,7 @@
 {
 	?>
 	<h1>Edit Config File</h1>
-	<form action="<?php echo $_SERVER["PHP_SELF"];?>" method="POST">
+	<form action="<?php echo htmlentities($_SERVER['PHP_SELF']);?>" method="POST">
 	<input type="hidden" name="saveconfig" value="1">
 	<h2>This page allows you to configure the "config.php" settings.  This file stores all the necessary
 	settings for your tracker.  Please do NOT edit the "config.php" file directly, 
@@ -54,6 +54,29 @@
 	<td><input type="checkbox" value="<?php if($temp == "true") echo "on"; else echo "off"?>" name="scrape"<?php if ($temp == "true") echo " checked";?>></td></tr>
 	<?php
 	$temp = fgets($fr);
+	$temp = substr($temp, strpos($temp, "=")+3, -3);
+	?>
+	<tr><td>Short Announce URL: You can turn on the short announce feature, making the URL end in /announce for your tracker. You should not utilize both tracker URL forms in one torrent at the same time, or you will get inconsistent results. Note: You will need the provided htaccess file, have URL rewrite capabilities, and have it properly set up to use this feature. Otherwise, leave it disabled.</td>
+	<td><select name="announceurl" id="announceurl">
+	<option title="disabled" value="announce.php"<?php if($temp == "announce.php") echo " selected=\"selected\"";?>>disabled</option>
+	<option title="enabled" value="announce"<?php if($temp == "announce") echo " selected=\"selected\"";?>>enabled</option>
+	</select>
+	</td>
+	</tr>
+	<?php
+	$temp = fgets($fr);
+	$temp = substr($temp, strpos($temp, "=")+2, -2);
+	?>
+	<tr><td><span class="notice">*</span>Lists the number of torrents on each page on your torrent tracker list. Default is 10.</td>
+	<td><input type="text" name="indexpagelimitspecify" size="40" value="<?php echo $temp;?>"></td></tr>
+	<?php
+	$temp = fgets($fr);
+	$temp = substr($temp, strpos($temp, "=")+2, -2);
+	?>
+	<tr><td><span class="notice">*</span>Lists the number of torrents on each page on the detailed statistics page. Default is 5.</td>
+	<td><input type="text" name="statspagelimitspecify" size="40" value="<?php echo $temp;?>"></td></tr>
+	<?php
+	$temp = fgets($fr);
 	$temp = substr($temp, strpos($temp, "=")+2, -2);
 	?>
 	<tr><td><span class="notice">*</span> Maximum reannounce interval (in seconds) 1800 == 30 minutes</td>
@@ -287,6 +310,21 @@
 if (isset($_POST["saveconfig"]))
 {
 	//check required entries for values, if blank: error out
+	if ($_POST["announceurl"] == "")
+	{
+		echo errorMessage() . "Error: The announce URL is blank.</p>";
+		exit();
+	}
+	if (!is_numeric($_POST["indexpagelimitspecify"]) || $_POST["indexpagelimitspecify"] == "" || $_POST["indexpagelimitspecify"] <= 0)
+	{
+		echo errorMessage() . "Error: The index page limit is not an integer, a negative number, or is blank.</p>";
+		exit();
+	}
+	if (!is_numeric($_POST["statspagelimitspecify"]) || $_POST["statspagelimitspecify"] == "" || $_POST["statspagelimitspecify"] <= 0)
+	{
+		echo errorMessage() . "Error: The statistics page limit is not an integer, a negative number, or is blank.</p>";
+		exit();
+	}
 	if (!is_numeric($_POST["report_interval"]) || $_POST["report_interval"] == "" || $_POST["report_interval"] <= 0)
 	{
 		echo errorMessage() . "Error: The maximum reannounce interval is not an integer, a negative number, or is blank.</p>";
@@ -416,6 +454,9 @@
 		"<?php //Please do NOT edit this file, use the admin page for changes.\n" .
 		"\$GLOBALS['hiddentracker'] = " . $hiddentracker . ";\n" .
 		"\$GLOBALS['scrape'] = " . $scrape . ";\n" .
+		"\$announceurl = '" . htmlspecialchars($_POST["announceurl"]) . "';\n" .
+		"\$GLOBALS['indexpagelimitspecify'] = " . htmlspecialchars($_POST["indexpagelimitspecify"]) . ";\n" .
+		"\$GLOBALS['statspagelimitspecify'] = " . htmlspecialchars($_POST["statspagelimitspecify"]) . ";\n" .
 		"\$GLOBALS['report_interval'] = " . htmlspecialchars($_POST["report_interval"]) . ";\n" .
 		"\$GLOBALS['min_interval'] = " . htmlspecialchars($_POST["min_interval"]) . ";\n" .
 		"\$GLOBALS['maxpeers'] = " . htmlspecialchars($_POST["maxpeers"]) . ";\n" .