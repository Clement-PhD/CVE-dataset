@@ -383,7 +383,7 @@ classicoutput($array, $infohash);
 		announceoutput($array);
 	}
 
-	if (file_exists("torrents/" . $filename . ".torrent")) //for newtorrents.php
+	if (isset($filename) && file_exists("torrents/" . $filename . ".torrent")) //for newtorrents.php
 	{
 		echo "<a href=\"newtorrents.php\"><img src=\"images/add.png\" border=\"0\" class=\"icon\" alt=\"Add Torrent\" title=\"Add Torrent\" /></a><a href=\"newtorrents.php\">Add Another Torrent</a><br>\n";
 		//add in Bittornado HTTP seeding spec